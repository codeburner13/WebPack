import { setTitle } from 'meta';

export default async (render, options) => {
  setTitle('Warnings');

  const warnings = options.stats.warnings.map(str => {
    str = str.split('\n');
    const header = str.shift();
    let footer = str.pop();

    if (!/^ @/.test(footer)) {
      str.push(footer);
      footer = '';
    }

    return {
      footer,
      header,
      text: str.join('\n'),
    };
  });

  const template = await import('./view.jade');
  render(template.default, { warnings });
};
